<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <link rel="stylesheet" href="todo.css" />
  </head>
  <body>
    <main>
      <section id="todo-section" class="todo-container">
        <div id="todo-form" class="todo-form">
          <div class="form-group">
            <label for="todo-title">Title:</label>
            <input type="text" id="todo-title" class="form-input" />
          </div>

          <div class="form-group">
            <label for="todo-priority">Priority:</label>
            <select id="todo-priority" class="form-select">
              <option disabled selected>Select option</option>
              <option value="HIGH">High</option>
              <option value="MEDIUM">Medium</option>
              <option value="LOW">Low</option>
            </select>
          </div>

          <div class="form-group">
            <label for="todo-final-date">Final Date:</label>
            <input type="date" id="todo-final-date" class="form-input" />
          </div>

          <div class="form-group">
            <label>Is Important:</label>
            <div class="radio-group">
              <input
                type="radio"
                name="todo-important"
                id="important-yes"
                value="yes"
              />
              <label for="important-yes">Yes</label>

              <input
                type="radio"
                name="todo-important"
                id="important-no"
                value="no"
              />
              <label for="important-no">No</label>
            </div>
          </div>

          <div class="form-group">
            <label for="todo-description">Description:</label>
            <textarea id="todo-description" class="form-textarea"></textarea>
          </div>

          <button type="submit" id="todo-submit-btn" class="btn-primary" onclick="postDataFromUser()">
            Add Todo
          </button>
        </div>
      </section>

      <section></section>
      <section></section>
      <section></section>
    </main>
    <script>


        let titleData=document.getElementById("todo-title")
        let priorityData=document.getElementById("todo-priority")
        let final_data=document.getElementById("todo-final-date")
        let isImportandYes=document.getElementById("important-yes")
        let isImportandNo=document.getElementById("important-no")


        function postDataFromUser(){
            const title=titleData.value 
            const priority=priorityData.value 
            const final_date=final_data.value 
            const isImportData=isImportandYes.value 
            const isImportantData=isImportandNo.value

            let is_important
            if(title===""){
                alert("Title field required")
            }
            if(priority===""){
                alert("priorityData is required")
            }
            if(final_date===""){
                alert("final Date is required")
            }
            if(isImportData!==""){
                is_important=true
            }
            if(isImportandNo!==""){
               is_important=true
            }

            const todoData={title,priority,final_date,is_important}
            postDataUser(todoData)
        
        }
        // post the data
        async function postDataUser(userData) {
            try {
                const response=await fetch(`http://127.0.0.1:8000/ecommerceApi/todo/`,{
                    method:"POST",
                    headers:{
                        "content-type":"application/json"
                    },
                    body:JSON.stringify(userData)
                })
                if(repsonse.ok){
                    alert("Submitted sucessfully")
                }else{
                    console.log("Invalid response")
                }
            } catch (error) {
                console.log(error)
                
            }
            
        }





        async function fetchApi() {
            try {
                const response=await fetch(`http://127.0.0.1:8000/ecommerceApi/todo/`)
                const data=await response.json()
                console.log(data)
            } catch (error) {
                console.log(error)
                
            }
            
        }
        fetchApi()

    </script>
  </body>
</html>
